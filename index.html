<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="None">
        
        
        <link rel="shortcut icon" href="img/favicon.ico">
        <title>Provoke ZFS corruption</title>
        <link href="css/bootstrap.min.css" rel="stylesheet">
        <link href="css/font-awesome.min.css" rel="stylesheet">
        <link href="css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css">

        <script src="js/jquery-1.10.2.min.js" defer></script>
        <script src="js/bootstrap.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body class="homepage">
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href=".">Provoke ZFS corruption</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="navitem active">
                                <a href="." class="nav-link">Blog version of provoke_ZFS_corruption</a>
                            </li>
                            <li class="navitem">
                                <a href="methodology/" class="nav-link">methodology</a>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">First efforts <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="first-efforts/" class="dropdown-item">provoke ZFS corruption</a>
</li>
                                    
<li>
    <a href="first-efforts/X86_trial_1/" class="dropdown-item">X86 trial one</a>
</li>
                                    
<li>
    <a href="first-efforts/X86_trial_2-elided/" class="dropdown-item">X86 trial ZFS from backports - elided syncoid output</a>
</li>
                                    
<li>
    <a href="first-efforts/X86_trial_2/" class="dropdown-item">X86 trial ZFS from backports</a>
</li>
                                    
<li>
    <a href="first-efforts/arm64_NVME_2.2.6-interesting/" class="dropdown-item">arm64 NVME 2.2.6 interesting</a>
</li>
                                    
<li>
    <a href="first-efforts/arm64_NVME_2.2.6-uninteresting/" class="dropdown-item">arm64 NVME 2.2.6 uninteresting</a>
</li>
                                    
<li>
    <a href="first-efforts/arm64_NVME_2.2.6/" class="dropdown-item">ARHM64 NVME ZFS 2.2.6</a>
</li>
                                    
<li>
    <a href="first-efforts/arm64_NVME_bullseye/" class="dropdown-item">ARM64 Pi CM4 test with older kernel</a>
</li>
                                    
<li>
    <a href="first-efforts/arm64_SATA_USB_trial/" class="dropdown-item">ARM64 SATA via ISB trial</a>
</li>
                                    
<li>
    <a href="first-efforts/initial-results/" class="dropdown-item">ARM64 Pi CM4 Initial Results</a>
</li>
                                    
<li>
    <a href="first-efforts/second-try/" class="dropdown-item">second try</a>
</li>
                                    
<li>
    <a href="first-efforts/syncoid-errors/" class="dropdown-item">syncoid errors</a>
</li>
                                    
<li>
    <a href="first-efforts/x86_SATA_Buster/" class="dropdown-item">X86 SATA testing with Buster</a>
</li>
                                    
<li>
    <a href="first-efforts/x86_trial_3/" class="dropdown-item">X86 third trial</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Tests <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">2025 02 03 methodology</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="tests/2025-02-03_methodology/additional/" class="dropdown-item">Additional information</a>
</li>
            
<li>
    <a href="tests/2025-02-03_methodology/data/" class="dropdown-item">data</a>
</li>
            
<li>
    <a href="tests/2025-02-03_methodology/results/" class="dropdown-item">2025-02-03 Results</a>
</li>
            
<li>
    <a href="tests/2025-02-03_methodology/setup/" class="dropdown-item">2025-02-03 Setup</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">2025 02 05 methodology</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="tests/2025-02-05_methodology/data/" class="dropdown-item">data</a>
</li>
            
<li>
    <a href="tests/2025-02-05_methodology/results/" class="dropdown-item">results</a>
</li>
            
<li>
    <a href="tests/2025-02-05_methodology/setup/" class="dropdown-item">2025-02-05 Setup</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">2025 02 06 FreeBSD test</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="tests/2025-02-06_FreeBSD_test/data/" class="dropdown-item">data</a>
</li>
            
<li>
    <a href="tests/2025-02-06_FreeBSD_test/results/" class="dropdown-item">FreeBSD test results</a>
</li>
            
<li>
    <a href="tests/2025-02-06_FreeBSD_test/setup/" class="dropdown-item">2025-02-06 Setup</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">2025 02 11 Linux Buster 5.10 2.0.3</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="tests/2025-02-11_Linux_Buster_5.10_2.0.3/data/" class="dropdown-item">Data - Buster 5.10 and 2.0.3 repeat</a>
</li>
            
<li>
    <a href="tests/2025-02-11_Linux_Buster_5.10_2.0.3/results/" class="dropdown-item">Linux Buster kernel 5.10.0 with ZFS 2.0.3</a>
</li>
            
<li>
    <a href="tests/2025-02-11_Linux_Buster_5.10_2.0.3/setup/" class="dropdown-item">Setup Buster 5.10 kernel and ZFS 2.0.3</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">2025 02 11 Linux Repeat</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="tests/2025-02-11_Linux_Repeat/data/" class="dropdown-item">Data</a>
</li>
            
<li>
    <a href="tests/2025-02-11_Linux_Repeat/results/" class="dropdown-item">Linux Repeat Results</a>
</li>
            
<li>
    <a href="tests/2025-02-11_Linux_Repeat/setup/" class="dropdown-item">2025-02-11 Setup</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">2025 02 12 FreeBSD 13 stock</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="tests/2025-02-12_FreeBSD_13_stock/data/" class="dropdown-item">FreeBSD 13 stock ZFS 2.1.</a>
</li>
            
<li>
    <a href="tests/2025-02-12_FreeBSD_13_stock/results/" class="dropdown-item">Results</a>
</li>
            
<li>
    <a href="tests/2025-02-12_FreeBSD_13_stock/setup/" class="dropdown-item">Setup</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">2025 02 12 Linux Buster 4.19 0.8.6</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="tests/2025-02-12_Linux_Buster_4.19_0.8.6/data/" class="dropdown-item">Data Linux Buster 4.19 kernel with ZFS 0.8.6</a>
</li>
            
<li>
    <a href="tests/2025-02-12_Linux_Buster_4.19_0.8.6/results/" class="dropdown-item">Linux Buster 4.19 and 0.8.6 results</a>
</li>
            
<li>
    <a href="tests/2025-02-12_Linux_Buster_4.19_0.8.6/setup/" class="dropdown-item">Setup Linux Buster 4.19 kernel with ZFS 0.8.6</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">2025 02 22 Linux Buster 2.0.0 local build</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="tests/2025-02-22_Linux_Buster_2.0.0_local_build/data/" class="dropdown-item">Setup</a>
</li>
            
<li>
    <a href="tests/2025-02-22_Linux_Buster_2.0.0_local_build/results/" class="dropdown-item">Results</a>
</li>
            
<li>
    <a href="tests/2025-02-22_Linux_Buster_2.0.0_local_build/setup/" class="dropdown-item">Setup</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">2025 02 23 Linux Bookworm Trixie 2.3.0</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="tests/2025-02-23_Linux_Bookworm_Trixie_2.3.0/data/" class="dropdown-item">data</a>
</li>
            
<li>
    <a href="tests/2025-02-23_Linux_Bookworm_Trixie_2.3.0/results/" class="dropdown-item">Linux Trixie 2.3.0 results</a>
</li>
            
<li>
    <a href="tests/2025-02-23_Linux_Bookworm_Trixie_2.3.0/setup/" class="dropdown-item">setup</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">2025 02 23 Linux Buster 2.0.0 patched</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="tests/2025-02-23_Linux_Buster_2.0.0_patched/setup/" class="dropdown-item">setup</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">2025 02 24 Linux Trixie 2.3.0 patched</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="tests/2025-02-24_Linux_Trixie_2.3.0_patched/data/" class="dropdown-item">data</a>
</li>
            
<li>
    <a href="tests/2025-02-24_Linux_Trixie_2.3.0_patched/results/" class="dropdown-item">Linux Trixie 2.3.0 patched results</a>
</li>
            
<li>
    <a href="tests/2025-02-24_Linux_Trixie_2.3.0_patched/setup/" class="dropdown-item">Linux Trixie 2.3.0 patched</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">2025 02 26 Linux Trixie 2.3.0 bzfs</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="tests/2025-02-26_Linux_Trixie_2.3.0_bzfs/data/" class="dropdown-item">data</a>
</li>
            
<li>
    <a href="tests/2025-02-26_Linux_Trixie_2.3.0_bzfs/setup/" class="dropdown-item">Linux Trixie 2.3.0 bzfs</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">2025 03 01 Linux Bookworm bisect 0.8.6 2.0.0</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="tests/2025-03-01_Linux_Bookworm_bisect_0.8.6_2.0.0/setup/" class="dropdown-item">Git bisect 0.8.6 to 2.0.0 - testing 2.0.0</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">2025 03 03 Linux Buster 5.4 bisect 0.8.6 2.0.0</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="tests/2025-03-03_Linux_Buster_5.4_bisect_0.8.6_2.0.0/setup/" class="dropdown-item">Built</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">2025 03 03 Linux Buster 5.9.16 bisect 0.8.6 2.0.0</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="tests/2025-03-03_Linux_Buster_5.9.16_bisect_0.8.6_2.0.0/Setup/" class="dropdown-item">Bisect 0.8.6 to 2.0.0 on Debian Buster running a user built 5.9.16 kernel</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">2025 04 02 Linux Buster 4.19 bisect 0.8.6 2.0.0 bad</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="tests/2025-04-02_Linux_Buster_4.19_bisect_0.8.6_2.0.0_bad/data/" class="dropdown-item">data</a>
</li>
            
<li>
    <a href="tests/2025-04-02_Linux_Buster_4.19_bisect_0.8.6_2.0.0_bad/results/" class="dropdown-item">results</a>
</li>
            
<li>
    <a href="tests/2025-04-02_Linux_Buster_4.19_bisect_0.8.6_2.0.0_bad/setup/" class="dropdown-item">Setup - Buster 4.19 kernel bisect 0.8.6 through 2.0.0</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">2025 04 02 Linux Buster 4.19 bisect 0.8.6 2.0.0 bisect 01</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="tests/2025-04-02_Linux_Buster_4.19_bisect_0.8.6_2.0.0_bisect_01/data/" class="dropdown-item">Data: Git bisect 0.8.6 to 2.0.0 - testing first bisect</a>
</li>
            
<li>
    <a href="tests/2025-04-02_Linux_Buster_4.19_bisect_0.8.6_2.0.0_bisect_01/results/" class="dropdown-item">Results: Git bisect 0.8.6 to 2.0.0 - testing first bisect</a>
</li>
            
<li>
    <a href="tests/2025-04-02_Linux_Buster_4.19_bisect_0.8.6_2.0.0_bisect_01/setup/" class="dropdown-item">Setup: Git bisect 0.8.6 to 2.0.0 - testing first bisect</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">2025 04 02 Linux Buster 4.19 bisect 0.8.6 2.0.0 good</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="tests/2025-04-02_Linux_Buster_4.19_bisect_0.8.6_2.0.0_good/data/" class="dropdown-item">Data: Git bisect 0.8.6 to 2.0.0 - testing 0.8.6</a>
</li>
            
<li>
    <a href="tests/2025-04-02_Linux_Buster_4.19_bisect_0.8.6_2.0.0_good/results/" class="dropdown-item">Results: Git bisect 0.8.6 to 2.0.0 - testing 0.8.6</a>
</li>
            
<li>
    <a href="tests/2025-04-02_Linux_Buster_4.19_bisect_0.8.6_2.0.0_good/setup/" class="dropdown-item">Setup: Git bisect 0.8.6 to 2.0.0 - testing 0.8.6</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">2025 04 04 Linux Buster 4.19 bisect 0.8.6 2.0.0 bisect 02</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="tests/2025-04-04_Linux_Buster_4.19_bisect_0.8.6_2.0.0_bisect_02/data/" class="dropdown-item">Data: Git bisect 0.8.6 to 2.0.0 - testing second bisect</a>
</li>
            
<li>
    <a href="tests/2025-04-04_Linux_Buster_4.19_bisect_0.8.6_2.0.0_bisect_02/results/" class="dropdown-item">Results: Git bisect 0.8.6 to 2.0.0 - testing second bisect</a>
</li>
            
<li>
    <a href="tests/2025-04-04_Linux_Buster_4.19_bisect_0.8.6_2.0.0_bisect_02/setup/" class="dropdown-item">Setup: Git bisect 0.8.6 to 2.0.0 - testing second bisect</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">2025 04 04 Linux Buster 4.19 bisect 0.8.6 2.0.0 bisect 03</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="tests/2025-04-04_Linux_Buster_4.19_bisect_0.8.6_2.0.0_bisect_03/data/" class="dropdown-item">Data: Git bisect 0.8.6 to 2.0.0 - testing second bisect</a>
</li>
            
<li>
    <a href="tests/2025-04-04_Linux_Buster_4.19_bisect_0.8.6_2.0.0_bisect_03/results/" class="dropdown-item">Results: Git bisect 0.8.6 to 2.0.0 - testing second bisect</a>
</li>
            
<li>
    <a href="tests/2025-04-04_Linux_Buster_4.19_bisect_0.8.6_2.0.0_bisect_03/setup/" class="dropdown-item">Setup: Git bisect 0.8.6 to 2.0.0 - testing third bisect</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">2025 04 04 Linux Buster 4.19 bisect 0.8.6 2.0.0 bisect 04</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="tests/2025-04-04_Linux_Buster_4.19_bisect_0.8.6_2.0.0_bisect_04/data/" class="dropdown-item">Data: Git bisect 0.8.6 to 2.0.0 - testing fourth bisect</a>
</li>
            
<li>
    <a href="tests/2025-04-04_Linux_Buster_4.19_bisect_0.8.6_2.0.0_bisect_04/results/" class="dropdown-item">Results: Git bisect 0.8.6 to 2.0.0 - testing fourth bisect</a>
</li>
            
<li>
    <a href="tests/2025-04-04_Linux_Buster_4.19_bisect_0.8.6_2.0.0_bisect_04/setup/" class="dropdown-item">Setup: Git bisect 0.8.6 to 2.0.0 - testing fourth bisect</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">2025 04 05 Linux Buster 4.19 bisect 0.8.6 2.0.0 bisect 05</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="tests/2025-04-05_Linux_Buster_4.19_bisect_0.8.6_2.0.0_bisect_05/data/" class="dropdown-item">Results: Git bisect 0.8.6 to 2.0.0 - testing fifth bisect</a>
</li>
            
<li>
    <a href="tests/2025-04-05_Linux_Buster_4.19_bisect_0.8.6_2.0.0_bisect_05/results/" class="dropdown-item">Results: Git bisect 0.8.6 to 2.0.0 - testing fifth bisect</a>
</li>
            
<li>
    <a href="tests/2025-04-05_Linux_Buster_4.19_bisect_0.8.6_2.0.0_bisect_05/setup/" class="dropdown-item">Setup: Git bisect 0.8.6 to 2.0.0 - testing fifth bisect</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">2025 04 05 Linux Buster 4.19 bisect 0.8.6 2.0.0 bisect 06</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="tests/2025-04-05_Linux_Buster_4.19_bisect_0.8.6_2.0.0_bisect_06/data/" class="dropdown-item">Data: Git bisect 0.8.6 to 2.0.0 - testing sixth bisect</a>
</li>
            
<li>
    <a href="tests/2025-04-05_Linux_Buster_4.19_bisect_0.8.6_2.0.0_bisect_06/results/" class="dropdown-item">Results: Git bisect 0.8.6 to 2.0.0 - testing sixth bisect</a>
</li>
            
<li>
    <a href="tests/2025-04-05_Linux_Buster_4.19_bisect_0.8.6_2.0.0_bisect_06/setup/" class="dropdown-item">Setup: Git bisect 0.8.6 to 2.0.0 - testing sixth bisect</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">2025 04 06 Linux Buster 4.19 bisect 0.8.6 2.0.0 bisect 07</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="tests/2025-04-06_Linux_Buster_4.19_bisect_0.8.6_2.0.0_bisect_07/data/" class="dropdown-item">Data: Git bisect 0.8.6 to 2.0.0 - testing sixth bisect</a>
</li>
            
<li>
    <a href="tests/2025-04-06_Linux_Buster_4.19_bisect_0.8.6_2.0.0_bisect_07/results/" class="dropdown-item">Results: Git bisect 0.8.6 to 2.0.0 - testing sixth bisect</a>
</li>
            
<li>
    <a href="tests/2025-04-06_Linux_Buster_4.19_bisect_0.8.6_2.0.0_bisect_07/setup/" class="dropdown-item">Setup: Git bisect 0.8.6 to 2.0.0 - testing seventh bisect</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">2025 04 06 Linux Buster 4.19 bisect 0.8.6 2.0.0 bisect 08</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="tests/2025-04-06_Linux_Buster_4.19_bisect_0.8.6_2.0.0_bisect_08/data/" class="dropdown-item">Results: Git bisect 0.8.6 to 2.0.0 - testing eighth bisect</a>
</li>
            
<li>
    <a href="tests/2025-04-06_Linux_Buster_4.19_bisect_0.8.6_2.0.0_bisect_08/results/" class="dropdown-item">Results: Git bisect 0.8.6 to 2.0.0 - testing eighth bisect</a>
</li>
            
<li>
    <a href="tests/2025-04-06_Linux_Buster_4.19_bisect_0.8.6_2.0.0_bisect_08/setup/" class="dropdown-item">Setup: Git bisect 0.8.6 to 2.0.0 - testing eighth bisect</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">2025 04 07 Linux Buster 4.19 bisect 0.8.6 2.0.0 bisect 09</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="tests/2025-04-07_Linux_Buster_4.19_bisect_0.8.6_2.0.0_bisect_09/data/" class="dropdown-item">Data: Git bisect 0.8.6 to 2.0.0 - testing ninth bisect</a>
</li>
            
<li>
    <a href="tests/2025-04-07_Linux_Buster_4.19_bisect_0.8.6_2.0.0_bisect_09/results/" class="dropdown-item">Setup: Git bisect 0.8.6 to 2.0.0 - testing ninth bisect</a>
</li>
            
<li>
    <a href="tests/2025-04-07_Linux_Buster_4.19_bisect_0.8.6_2.0.0_bisect_09/setup/" class="dropdown-item">Setup: Git bisect 0.8.6 to 2.0.0 - testing ninth bisect</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">2025 04 07 Linux Buster 4.19 bisect 0.8.6 2.0.0 bisect 10</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="tests/2025-04-07_Linux_Buster_4.19_bisect_0.8.6_2.0.0_bisect_10/data/" class="dropdown-item">Data: Git bisect 0.8.6 to 2.0.0 - testing tenth bisect</a>
</li>
            
<li>
    <a href="tests/2025-04-07_Linux_Buster_4.19_bisect_0.8.6_2.0.0_bisect_10/results/" class="dropdown-item">Results: Git bisect 0.8.6 to 2.0.0 - testing tenth bisect</a>
</li>
            
<li>
    <a href="tests/2025-04-07_Linux_Buster_4.19_bisect_0.8.6_2.0.0_bisect_10/setup/" class="dropdown-item">Setup: Git bisect 0.8.6 to 2.0.0 - testing tenth bisect</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">2025 04 08 Linux Buster 4.19 bisect 0.8.6 2.0.0 bisect 11</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="tests/2025-04-08_Linux_Buster_4.19_bisect_0.8.6_2.0.0_bisect_11/data/" class="dropdown-item">Data: Git bisect 0.8.6 to 2.0.0 - testing tenth bisect</a>
</li>
            
<li>
    <a href="tests/2025-04-08_Linux_Buster_4.19_bisect_0.8.6_2.0.0_bisect_11/results/" class="dropdown-item">Results: Git bisect 0.8.6 to 2.0.0 - testing tenth bisect</a>
</li>
            
<li>
    <a href="tests/2025-04-08_Linux_Buster_4.19_bisect_0.8.6_2.0.0_bisect_11/setup/" class="dropdown-item">Setup: Git bisect 0.8.6 to 2.0.0 - testing eleventh bisect</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">2025 04 09 Linux Buster 4.19 bisect 0.8.6 2.0.0 bisect 10 repeat</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="tests/2025-04-09_Linux_Buster_4.19_bisect_0.8.6_2.0.0_bisect_10_repeat/data/" class="dropdown-item">Data: Git bisect 0.8.6 to 2.0.0 - testing tenth bisect - repeat</a>
</li>
            
<li>
    <a href="tests/2025-04-09_Linux_Buster_4.19_bisect_0.8.6_2.0.0_bisect_10_repeat/results/" class="dropdown-item">Results: Git bisect 0.8.6 to 2.0.0 - testing tenth bisect - repeat</a>
</li>
            
<li>
    <a href="tests/2025-04-09_Linux_Buster_4.19_bisect_0.8.6_2.0.0_bisect_10_repeat/setup/" class="dropdown-item">Setup: Git bisect 0.8.6 to 2.0.0 - testing tenth bisect - repeat</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">2025 04 09 Linux Buster 4.19 bisect 0.8.6 2.0.0 bisect 9 repeat</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="tests/2025-04-09_Linux_Buster_4.19_bisect_0.8.6_2.0.0_bisect_9_repeat/data/" class="dropdown-item">Data: Git bisect 0.8.6 to 2.0.0 - testing tenth bisect - repeat</a>
</li>
            
<li>
    <a href="tests/2025-04-09_Linux_Buster_4.19_bisect_0.8.6_2.0.0_bisect_9_repeat/results/" class="dropdown-item">Results: Git bisect 0.8.6 to 2.0.0 - testing tenth bisect - repeat</a>
</li>
            
<li>
    <a href="tests/2025-04-09_Linux_Buster_4.19_bisect_0.8.6_2.0.0_bisect_9_repeat/setup/" class="dropdown-item">Setup: Git bisect 0.8.6 to 2.0.0 - testing tenth bisect - repeat</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">2025 04 10 Linux Buster 4.19 30af21b pool settings 1</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="tests/2025-04-10_Linux_Buster_4.19_30af21b_pool_settings_1/data/" class="dropdown-item">Setup: Commit 30af21b test with modified pool settings</a>
</li>
            
<li>
    <a href="tests/2025-04-10_Linux_Buster_4.19_30af21b_pool_settings_1/results/" class="dropdown-item">SetResultsup: Commit 30af21b test with modified pool settings</a>
</li>
            
<li>
    <a href="tests/2025-04-10_Linux_Buster_4.19_30af21b_pool_settings_1/setup/" class="dropdown-item">Setup: Commit 30af21b test with modified pool settings</a>
</li>
    </ul>
  </li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" class="nav-link disabled">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="methodology/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-light">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-level="1"><a href="#blog-version-of-provoke_zfs_corruption" class="nav-link">Blog version of provoke_ZFS_corruption</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#2025-04-08-bisect-conclusion" class="nav-link">2025-04-08 bisect conclusion</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#2025-02-04-process-improvements" class="nav-link">2025-02-04 process improvements</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#2025-02-11-test-instructions" class="nav-link">2025-02-11 Test instructions</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="blog-version-of-provoke_zfs_corruption">Blog version of provoke_ZFS_corruption</h1>
<ul>
<li>Original bug: <a href="https://github.com/openzfs/zfs/issues/12014">https://github.com/openzfs/zfs/issues/12014</a></li>
<li>Github: <a href="https://github.com/HankB/provoke_ZFS_corruption/tree/main">https://github.com/HankB/provoke_ZFS_corruption/tree/main</a></li>
<li>Blog: <a href="https://HankB.github.io/provoke_ZFS_corruption/">https://HankB.github.io/provoke_ZFS_corruption/</a></li>
<li><a href="methodology/">Update on methodology</a></li>
</ul>
<p>Preliminary results of the bisect are <a href="#2025-04-08-bisect-conclusion">below</a>. There has been discussion during the testing at <a href="https://github.com/openzfs/zfs/discussions/17203">https://github.com/openzfs/zfs/discussions/17203</a> and per suggestion, I will be repeating the test on 30af21b02569ac192f52ce6e6511015f8a8d5729. I have also add some further verification to the results for the final "good" test.</p>
<p>Directory of tests starting with preliminary exploration.</p>
<table>
<thead>
<tr>
<th>started</th>
<th>completed</th>
<th>results</th>
<th>ZFS ver</th>
<th>OS</th>
<th>kernel ver</th>
<th>notes</th>
</tr>
</thead>
<tbody>
<tr>
<td>2025-02-03</td>
<td>2025-02-04</td>
<td><a href="tests/2025-02-03_methodology/results/">corruption</a></td>
<td>zfs-2.1.11-1+deb12u1</td>
<td>Debian 12</td>
<td>6.1.0-30-amd64</td>
<td>methodology exploration</td>
</tr>
<tr>
<td>2025-02-05</td>
<td>2025-02-05</td>
<td><a href="tests/2025-02-05_methodology/results/">corruption in 15 minutes</a></td>
<td>zfs-2.1.11-1+deb12u1</td>
<td>Debian 12</td>
<td>6.1.0-30-amd64</td>
<td>methodology exploration</td>
</tr>
<tr>
<td>2025-02-07</td>
<td>2025-02-07</td>
<td><a href="tests/2025-02-06_FreeBSD_test/results/">corruption in 10 hours</a></td>
<td>zfs-2.3.99-170-FreeBSD_g34205715e</td>
<td>15.0-CURRENT FreeBSD</td>
<td>main-n275087-cdacb12065e4</td>
<td>FreeBSD on Pi 4B</td>
</tr>
<tr>
<td>2025-02-11</td>
<td>2025-02-11</td>
<td><a href="tests/2025-02-11_Linux_Repeat/results/">corruption in 2 hours</a></td>
<td>zfs-2.1.11-1+deb12u1</td>
<td>Debian 12</td>
<td>6.1.0-30-amd64</td>
<td>repeat methodology exploration, test FreeBSD tweaks</td>
</tr>
<tr>
<td>2025-02-12</td>
<td>2025-02-12</td>
<td><a href="tests/2025-02-11_Linux_Buster_5.10_2.0.3/results/">corruption instantly [1]</a></td>
<td>zfs-2.0.3-9~bpo10+1</td>
<td>Debian 10</td>
<td>5.10.0-0.deb10.24-amd64</td>
<td>repeat previous tests using new methodology</td>
</tr>
<tr>
<td>2025-02-11</td>
<td>2025-02-22</td>
<td><a href="tests/2025-02-12_Linux_Buster_4.19_0.8.6/results/">no corruption</a></td>
<td>zfs-0.8.6-1</td>
<td>Debian 10</td>
<td>4.19.0-27-amd64</td>
<td>demonstrate no corruption with 0.8.6</td>
</tr>
<tr>
<td>2025-02-22</td>
<td>2025-02-23</td>
<td><a href="tests/2025-02-22_Linux_Buster_2.0.0_local_build/results/">corruption in 2 hours</a></td>
<td>zfs-2.0.0-1</td>
<td>Debian 10</td>
<td>4.19.0-27-amd64</td>
<td>first image restore test</td>
</tr>
<tr>
<td>2025-02-22</td>
<td></td>
<td><a href="tests/2025-02-23_Linux_Buster_2.0.0_patched/setup/">deferred</a></td>
<td>zfs-2.0.0-1</td>
<td>Debian 10</td>
<td>4.19.0-27-amd64</td>
<td>unable to resolve symbol issue</td>
</tr>
<tr>
<td>2025-02-24</td>
<td></td>
<td><a href="tests/2025-02-23_Linux_Bookworm_Trixie_2.3.0/results/">corruption in 2 hours</a></td>
<td>2.3.0-1</td>
<td>Debian Trixie</td>
<td>6.12.12-amd64</td>
<td></td>
</tr>
<tr>
<td>2025-02-24</td>
<td></td>
<td><a href="tests/2025-02-24_Linux_Trixie_2.3.0_patched/results/">corruption in 2 hours</a></td>
<td>2.3.0-1+patch</td>
<td>Debian Trixie</td>
<td>6.12.12-amd64</td>
<td></td>
</tr>
<tr>
<td>2025-02-25</td>
<td></td>
<td><a href="tests/2025-02-26_Linux_Trixie_2.3.0_bzfs/setup/#2025-02-26-results">set aside</a></td>
<td>2.3.0-1</td>
<td>Debian Trixie</td>
<td>6.12.12-amd64</td>
<td></td>
</tr>
<tr>
<td>2025-04-02</td>
<td>2025-04-02</td>
<td><a href="tests/2025-04-02_Linux_Buster_4.19_bisect_0.8.6_2.0.0_bad/results/">corruption in 2 hours</a></td>
<td>2.0.0-1</td>
<td>Debian 10</td>
<td>4.19.0-27-amd64</td>
<td>Confirm that 4.19 + 2.0.0 results in corruption</td>
</tr>
<tr>
<td>2025-04-02</td>
<td>2025-04-03</td>
<td><a href="tests/2025-04-02_Linux_Buster_4.19_bisect_0.8.6_2.0.0_good/results/">no corruption after 12 hours</a></td>
<td>0.8.6</td>
<td>Debian 10</td>
<td>4.19.0-27-amd64</td>
<td>Confirm that 4.19 + 0.8.6 does not cause corruption</td>
</tr>
<tr>
<td>2025-04-03</td>
<td>2025-04-04</td>
<td><a href="tests/2025-04-02_Linux_Buster_4.19_bisect_0.8.6_2.0.0_bisect_01/results/">no corruption after 20 hours</a></td>
<td>78fac8d925fdd64584292fbda4ed9e3e2bbaae66</td>
<td>Debian 10</td>
<td>4.19.0-27-amd64</td>
<td>first bisect between 2.0.0 and 0.8.6,</td>
</tr>
<tr>
<td>2025-04-03</td>
<td>2025-04-04</td>
<td><a href="tests/2025-04-04_Linux_Buster_4.19_bisect_0.8.6_2.0.0_bisect_02/results/">corruption after 2 1/2 hours</a></td>
<td>327000ce04b4243f140a38647dca59683d39b8e7</td>
<td>Debian 10</td>
<td>4.19.0-27-amd64</td>
<td>2nd bisect</td>
</tr>
<tr>
<td>2025-04-04</td>
<td>2025-04-04</td>
<td><a href="tests/2025-04-04_Linux_Buster_4.19_bisect_0.8.6_2.0.0_bisect_03/results/">corruption after 2:50</a></td>
<td>eedb3a62b9f16b989aa02d00db63de5dff200572</td>
<td>Debian 10</td>
<td>4.19.0-27-amd64</td>
<td>3rd bisect</td>
</tr>
<tr>
<td>2025-04-04</td>
<td>2025-04-05</td>
<td><a href="tests/2025-04-04_Linux_Buster_4.19_bisect_0.8.6_2.0.0_bisect_04/results/">corruption after 2 1/2 hours</a></td>
<td>1e620c98727a5a5cff1af70fef9bc25626b4e9d8</td>
<td>Debian 10</td>
<td>4.19.0-27-amd64</td>
<td>4th bisect</td>
</tr>
<tr>
<td>2025-04-05</td>
<td>2025-04-05</td>
<td><a href="tests/2025-04-05_Linux_Buster_4.19_bisect_0.8.6_2.0.0_bisect_05/results/">corruption after 3+ hours</a></td>
<td>a64f8276c7c2e121f438866d2f91ddff22031e7f</td>
<td>Debian 10</td>
<td>4.19.0-27-amd64</td>
<td>5th bisect</td>
</tr>
<tr>
<td>2025-04-05</td>
<td>2025-04-06</td>
<td><a href="tests/2025-04-05_Linux_Buster_4.19_bisect_0.8.6_2.0.0_bisect_06/results/">no corruption after 12+ hours</a></td>
<td>8e91c5ba6a1b2c607a1ed4a0a42b2d07eca13091</td>
<td>Debian 10</td>
<td>4.19.0-27-amd64</td>
<td>6th bisect</td>
</tr>
<tr>
<td>2025-04-06</td>
<td>2025-04-06</td>
<td><a href="tests/2025-04-06_Linux_Buster_4.19_bisect_0.8.6_2.0.0_bisect_07/results/">no corruption after 11:30 hours</a></td>
<td>d9cd66e45f285356624d26eb92e10e2baf2738ee</td>
<td>Debian 10</td>
<td>4.19.0-27-amd64</td>
<td>7th bisect</td>
</tr>
<tr>
<td>2025-04-06</td>
<td>2025-04-07</td>
<td><a href="tests/2025-04-06_Linux_Buster_4.19_bisect_0.8.6_2.0.0_bisect_08/results/">no corruption during flawed test</a></td>
<td>b1b4ac27082aede8522e479c87897026519f1dd7</td>
<td>Debian 10</td>
<td>4.19.0-27-amd64</td>
<td>8th bisect</td>
</tr>
<tr>
<td>2025-04-07</td>
<td>2025-04-07</td>
<td><a href="tests/2025-04-07_Linux_Buster_4.19_bisect_0.8.6_2.0.0_bisect_09/results/">corruption after 3 hours</a></td>
<td>0b755ec3d5ba531d2662da54fb9ac62627ce2c66</td>
<td>Debian 10</td>
<td>4.19.0-27-amd64</td>
<td>9th bisect</td>
</tr>
<tr>
<td>2025-04-07</td>
<td>2025-04-08</td>
<td><a href="tests/2025-04-07_Linux_Buster_4.19_bisect_0.8.6_2.0.0_bisect_10/results/">corruption after about 2 1/2 hours</a></td>
<td>30af21b02569ac192f52ce6e6511015f8a8d5729</td>
<td>Debian 10</td>
<td>4.19.0-27-amd64</td>
<td>10th bisect</td>
</tr>
<tr>
<td>2025-04-07</td>
<td>2025-04-08</td>
<td><a href="tests/2025-04-08_Linux_Buster_4.19_bisect_0.8.6_2.0.0_bisect_11/results/">no corruption after 12 hours</a></td>
<td>c1b5801bb5af0055e5f3d263beaa07026103e212</td>
<td>Debian 10</td>
<td>4.19.0-27-amd64</td>
<td>11th bisect</td>
</tr>
<tr>
<td>2025-04-07</td>
<td>2025-04-08</td>
<td><a href="tests/2025-04-09_Linux_Buster_4.19_bisect_0.8.6_2.0.0_bisect_10_repeat/results/">corruption after 3 hours</a></td>
<td>30af21b02569ac192f52ce6e6511015f8a8d5729</td>
<td>Debian 10</td>
<td>4.19.0-27-amd64</td>
<td>repeat 10th bisect</td>
</tr>
<tr>
<td>2025-04-07</td>
<td>2025-04-08</td>
<td><a href="tests/2025-04-10_Linux_Buster_4.19_30af21b_pool_settings_1/results/">corruption after 3 hours</a></td>
<td>30af21b02569ac192f52ce6e6511015f8a8d5729</td>
<td>Debian 10</td>
<td>4.19.0-27-amd64</td>
<td>modified pool settings</td>
</tr>
</tbody>
</table>
<h2 id="2025-04-08-bisect-conclusion">2025-04-08 bisect conclusion</h2>
<p>Assuming the tests have successfully identified corruption, the result of the bisect is:</p>
<pre><code class="language-text">hbarta@orion:~/zfs$ git bisect good
30af21b02569ac192f52ce6e6511015f8a8d5729 is the first bad commit
commit 30af21b02569ac192f52ce6e6511015f8a8d5729
Author: Paul Dagnelie &lt;pcd@delphix.com&gt;
Date:   Wed Jun 19 09:48:13 2019 -0700

    Implement Redacted Send/Receive

    Redacted send/receive allows users to send subsets of their data to
    a target system. One possible use case for this feature is to not
    transmit sensitive information to a data warehousing, test/dev, or
    analytics environment. Another is to save space by not replicating
    unimportant data within a given dataset, for example in backup tools
    like zrepl.

    Redacted send/receive is a three-stage process. First, a clone (or
    clones) is made of the snapshot to be sent to the target. In this
    clone (or clones), all unnecessary or unwanted data is removed or
    modified. This clone is then snapshotted to create the &quot;redaction
    snapshot&quot; (or snapshots). Second, the new zfs redact command is used
    to create a redaction bookmark. The redaction bookmark stores the
    list of blocks in a snapshot that were modified by the redaction
    snapshot(s). Finally, the redaction bookmark is passed as a parameter
    to zfs send. When sending to the snapshot that was redacted, the
    redaction bookmark is used to filter out blocks that contain sensitive
    or unwanted information, and those blocks are not included in the send
    stream.  When sending from the redaction bookmark, the blocks it
    contains are considered as candidate blocks in addition to those
    blocks in the destination snapshot that were modified since the
    creation_txg of the redaction bookmark.  This step is necessary to
    allow the target to rehydrate data in the case where some blocks are
    accidentally or unnecessarily modified in the redaction snapshot.

    The changes to bookmarks to enable fast space estimation involve
    adding deadlists to bookmarks. There is also logic to manage the
    life cycles of these deadlists.

    The new size estimation process operates in cases where previously
    an accurate estimate could not be provided. In those cases, a send
    is performed where no data blocks are read, reducing the runtime
    significantly and providing a byte-accurate size estimate.

    Reviewed-by: Dan Kimmel &lt;dan.kimmel@delphix.com&gt;
    Reviewed-by: Matt Ahrens &lt;mahrens@delphix.com&gt;
    Reviewed-by: Prashanth Sreenivasa &lt;pks@delphix.com&gt;
    Reviewed-by: John Kennedy &lt;john.kennedy@delphix.com&gt;
    Reviewed-by: George Wilson &lt;george.wilson@delphix.com&gt;
    Reviewed-by: Chris Williamson &lt;chris.williamson@delphix.com&gt;
    Reviewed-by: Pavel Zhakarov &lt;pavel.zakharov@delphix.com&gt;
    Reviewed-by: Sebastien Roy &lt;sebastien.roy@delphix.com&gt;
    Reviewed-by: Prakash Surya &lt;prakash.surya@delphix.com&gt;
    Reviewed-by: Brian Behlendorf &lt;behlendorf1@llnl.gov&gt;
    Signed-off-by: Paul Dagnelie &lt;pcd@delphix.com&gt;
    Closes #7958

:040000 040000 22bddd232c24007744e929e18259e69cc01be8da 603ec1aaef6c1a7fab80168a9b5309f89fe13c5d M      cmd
:100644 100644 db614084e37e3edbeef28f0430e85f41a0b46ac8 e0349a18219a5d12b0f1fdcb9b13ad079083d741 M      configure.ac
:040000 040000 13ca95901c67684f0cdc178dc08e4e2c4f8a0f21 a31bf2b7324d52a429c7accfd2d482edbc9f742d M      include
:040000 040000 f82837df7ff2132fcc3bb39c6ef925776cce2dcc a90467d84951a2c93f5bf0c02c12108855d995e6 M      lib
:040000 040000 45d76cb23df175339c0624121e17b4a30f85ad41 3e3a905736d37756b766573b876c75b66084923b M      man
:040000 040000 6ab2cf3acb56bf25c7b5762d8e7d205b1d9d47f7 ce8fe30aac453c96dc5875839b67d49a4ea63f0f M      module
:040000 040000 9c3cc75a332d4b006ceb5a7b282a298ac8ecd704 937acde4124386561528a96e2869a98d9dea0aaa M      tests
hbarta@orion:~/zfs$
</code></pre>
<ul>
<li><code>[1]</code> Test ran for hours w/ wrong ownership and the stir process changed nothing. When file ownership was fixed, corruption was nearly instant.</li>
</ul>
<h2 id="2025-02-04-process-improvements">2025-02-04 process improvements</h2>
<p>These have worked, producing corruption in less than a day. This should shorten testing time and also proves that the H/W in use will produce corruption using current Debian kernel and ZFS. <a href="tests/2025-02-03_methodology/results/">More details</a> In addition, the scripts have been tweaked to work on FreeBSD (with <code>bash</code>) and corruption was produced on a FreeBSD host.</p>
<h2 id="2025-02-11-test-instructions">2025-02-11 Test instructions</h2>
<p>Configure a host and two pools <code>send</code> and <code>recv</code>. Review the scripts that will be used as my user name <code>hbarta</code> has been hard coded in too many places. (PRs to corract that gratefully accepted.)</p>
<ol>
<li>Run the <code>populate_pool.sh</code> script as <code>root</code> to populate the send pool. It does not terminate when there is sufficient data and will need to be killed when the <code>send</code> pool reaches about 50% capacity. The easiest way to kill it is to find the PID of the script and <code>kill &lt;PID&gt;</code> as root.</li>
<li>Run <code>syncoid</code> as <code>root</code> manually once to mirror <code>send</code> to <code>recv</code>. Set permissions or ownership on the resulting files in <code>send</code> to allow user modification.</li>
<li>Execute <code>zfs allow</code> as <code>root</code> to provide appropriate permissions so that <code>syncoid</code> can run as your user.</li>
<li>Create a directory <code>~/logs</code> where the scripts will write logs.</li>
<li>
<p>Start the following three scripts. (I hard link them to the user <code>~/bin</code> directory for convenience but it is left to the user to make them available in the PATH.)</p>
</li>
<li>
<p><code>thrash_stir.sh</code> - This script will modify random files in the pool continuously and also capture recursive snapshots.</p>
</li>
<li><code>thrash_syncoid.sh</code> - This script will invoke <code>syncoid</code> continuously.</li>
<li><code>manage_snaps.sh</code> - This script will manage snapshots every minute to limit retained snapshots to 100 for each dataset.</li>
</ol>
<p>All three scripts will check for and exit when corruption is detected. In addition I add a cron job as <code>root</code> to <code>zpool scrub</code> both pools several times/day.</p>
<p>For details on the exact commands used to prepare the test, please see <a href="tests/2025-02-05_methodology/setup/">the methodology exploration</a>.</p></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = ".",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="js/base.js" defer></script>
        <script src="search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>

<!--
MkDocs version : 1.4.2
Build Date UTC : 2025-04-10 21:30:15.673747+00:00
-->
